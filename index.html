<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>오사카 2박3일 가족여행 지도 (완전판)</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<style>
  html, body, #map { height:100%; margin:0; padding:0; }
  .leaflet-popup-content { font-size:15px; line-height:1.4; }
  .topbar { position: absolute; z-index: 1000; left: 10px; top: 10px; background: rgba(255,255,255,0.95); padding:8px 10px; border-radius:8px; box-shadow: 0 2px 8px rgba(0,0,0,0.2); font-family: sans-serif; }
  .legend { font-size:13px; }
</style>
</head>
<body>
<div id="map"></div>
<div class="topbar">
  <strong>오사카 2박3일 가족여행 지도 (완전판)</strong><br/>
  <div class="legend">
    <span style="color:#1E90FF;">●</span> 1일차 &nbsp;
    <span style="color:#32CD32;">●</span> 2일차 &nbsp;
    <span style="color:#FF6347;">●</span> 3일차
  </div>
</div>

<script>
var map = L.map('map').setView([34.67,135.50], 13);

// 지도 타일
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  maxZoom: 19,
  attribution: '© OpenStreetMap contributors'
}).addTo(map);

// 마커 생성 함수 (기본 마커)
function makeMarker(lat, lon, title){
  var marker = L.marker([lat, lon]).addTo(map);
  marker.bindPopup('<b>' + title + '</b><br/><a href="https://www.google.com/maps/search/?api=1&query=' + lat + ',' + lon + '" target="_blank">Google Maps에서 보기</a>');
  return marker;
}

var day1Color = '#1E90FF'; // 파랑
var day2Color = '#32CD32'; // 초록
var day3Color = '#FF6347'; // 빨강

// 장소 데이터
var places = [
  // 1일차
  [34.6749,135.5022,'소테츠 프레사 인 오사카 신사이바시',day1Color],
  [34.6689,135.5021,'미즈노',day1Color],
  [34.6692,135.5041,'치보',day1Color],
  [34.6700,135.5038,'츠루동탄 소에몬초점',day1Color],
  [34.6687,135.5018,'도톤보리',day1Color],
  [34.6685,135.4955,'아메리카무라',day1Color],
  [34.6665,135.5015,'규카츠 모토무라',day1Color],
  [34.6658,135.5025,'우오신 난바',day1Color],
  [34.7055,135.4920,'우메다 공중정원',day1Color],

  // 2일차
  [34.6749,135.5022,'숙소 출발',day2Color],
  [34.6547,135.4289,'오사카코역',day2Color],
  [34.6543,135.4287,'오사카 카이유칸 수족관',day2Color],
  [34.65405,135.4281,'하나비',day2Color],
  [34.65410,135.4279,'카이유테이',day2Color],
  [34.6540,135.4282,'타코야키랩',day2Color],
  [34.65395,135.4280,'앗치치혼포',day2Color],
  [34.6545,135.4299,'산타마리아 유람선',day2Color],
  [34.6537,135.4290,'텐포잔 대관람차',day2Color],
  [34.6543,135.4284,'텐포잔 마켓플레이스',day2Color],
  [34.6541,135.4286,'리쿠로오지상 치즈케이크 텐포잔점',day2Color],
  [34.6660,135.5020,'스시로바타 키타로스시',day2Color],

  // 3일차
  [34.6749,135.5022,'숙소 출발',day3Color],
  [34.6873,135.5262,'오사카성 천수각',day3Color],
  [34.6534,135.5136,'덴노지',day3Color],
  [34.6540,135.5138,'사이제리야 덴노지점',day3Color],
  [34.6543,135.5137,'스시로 덴노지점',day3Color],
  [34.6695,135.5025,'와규 이다텐',day3Color],
  [34.6531,135.5109,'덴노지 동물원',day3Color],
  [34.6537,135.5100,'텐시바 공원',day3Color],
  [34.6617,135.4989,'카도야쇼쿠도',day3Color],
  [34.6642,135.5028,'551 호라이 본점',day3Color],
  [34.6640,135.5027,'난바 OCAT',day3Color]
];

var markers = [];
places.forEach(function(p){
  var m = makeMarker(p[0],p[1],p[2]);
  markers.push(m);
});

// 폴리라인
var day1Line = L.polyline([
  [34.6749,135.5022],[34.6689,135.5021],[34.6692,135.5041],[34.6700,135.5038],
  [34.6687,135.5018],[34.6685,135.4955],[34.6665,135.5015],[34.6658,135.5025],[34.7055,135.4920]
],{color:day1Color, weight:4, opacity:0.7}).addTo(map);

var day2Line = L.polyline([
  [34.6749,135.5022],[34.6547,135.4289],[34.6543,135.4287],[34.65405,135.4281],
  [34.65410,135.4279],[34.6540,135.4282],[34.65395,135.4280],[34.6545,135.4299],
  [34.6537,135.4290],[34.6543,135.4284],[34.6541,135.4286],[34.6660,135.5020]
],{color:day2Color, weight:4, opacity:0.7}).addTo(map);

var day3Line = L.polyline([
  [34.6749,135.5022],[34.6873,135.5262],[34.6534,135.5136],[34.6540,135.5138],
  [34.6543,135.5137],[34.6695,135.5025],[34.6531,135.5109],[34.6537,135.5100],
  [34.6617,135.4989],[34.6642,135.5028],[34.6640,135.5027]
],{color:day3Color, weight:4, opacity:0.7}).addTo(map);

// 마커 + 폴리라인 그룹화 후 지도 범위 맞춤
var group = L.featureGroup(markers.concat([day1Line, day2Line, day3Line]));
map.fitBounds(group.getBounds().pad(0.15));

</script>
</body>
</html>
